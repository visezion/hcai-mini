<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>hcai-mini | Smart DC Control</title>
    <link rel="stylesheet" href="/ui/styles.css" />
  </head>
  <body data-theme="light">
    <header class="topbar">
      <div class="brand">
        <h1>hcai-mini</h1>
        <p class="subtitle">Predict Ã‚Â· Detect Ã‚Â· Control</p>
      </div>
      <div class="topbar-actions">
        <div class="theme-toggle">
          <span>Light</span>
          <label class="switch">
            <input type="checkbox" id="theme-toggle" />
            <span class="slider"></span>
          </label>
          <span>Dark</span>
        </div>
        <div class="status-cards">
          <div class="stat" id="stat-site"><span>Site</span><strong>--</strong></div>
          <div class="stat" id="stat-mode"><span>Mode</span><strong>--</strong></div>
          <div class="stat" id="stat-racks"><span>Racks</span><strong>0</strong></div>
          <div class="stat" id="stat-ingest"><span>Last ingest</span><strong>--</strong></div>
        </div>
      </div>
    </header>

    <section class="hero">
      <div>
        <h2>Human-centric AI mini controller</h2>
        <p>hcai-mini forecasts environmental drift, flags anomalies, and executes safe adjustments automaticallyÃ¢â‚¬â€while keeping operators in full control.</p>
      </div>
      <ul>
        <li>Real-time telemetry ingest</li>
        <li>Forecast + anomaly detection</li>
        <li>Policy-safe MPC actions</li>
        <li>Auto-discovery & approvals</li>
      </ul>
    </section>

    <nav class="main-nav">
      <button class="nav-btn active" data-page="monitor">Monitor</button>
      <button class="nav-btn" data-page="devices">Devices</button>
      <button class="nav-btn" data-page="actions">Actions</button>
      <button class="nav-btn" data-page="setup">Setup</button>
    </nav>

    <section class="summary" id="summary-bar">
      <article class="summary-card" id="summary-ingest">
        <h3>Ingest</h3>
        <p>Live messages processed</p>
        <div class="value">0</div>
        <small id="summary-ingest-meta">Awaiting telemetryÃ¢â‚¬Â¦</small>
      </article>
      <article class="summary-card" id="summary-forecast">
        <h3>Forecast</h3>
        <p>30 min horizon</p>
        <div class="value">30&nbsp;min</div>
        <small>Replace baseline with TFT/N-BEATS when ready</small>
      </article>
      <article class="summary-card" id="summary-anomaly">
        <h3>Detect</h3>
        <p>Active anomaly alarms</p>
        <div class="value">0</div>
        <small id="summary-anomaly-meta">No active alerts</small>
      </article>
      <article class="summary-card" id="summary-actions">
        <h3>Control</h3>
        <p>Recent AI proposals</p>
        <div class="value">0</div>
        <small id="summary-actions-meta">No actions queued</small>
      </article>
    </section>

    <main class="pages">
      <section class="page active" id="page-monitor">
        <div class="panel wide" id="telemetry-panel">
          <div class="panel-header">
            <div>
              <h2>Telemetry</h2>
              <p>Rack metrics updated every second</p>
            </div>
            <div class="panel-meta" id="telemetry-updated">Updated --</div>
          </div>
          <div id="tiles" class="grid"></div>
        </div>
        <div class="panel" id="history-panel">
          <div class="panel-header">
            <div>
              <h2>History &amp; prediction</h2>
              <p>Last 20 points + forecast</p>
            </div>
            <select id="history-rack"></select>
          </div>
          <ul id="history-list" class="list"></ul>
        </div>
      </section>

      <section class="page" id="page-devices">
        <div class="panel" id="scenario-panel">
          <div class="panel-header">
            <div>
              <h2>Scenario controls</h2>
              <p>Trigger simulated datacenter events</p>
            </div>
            <small class="panel-meta">Powered by hcai-sim</small>
          </div>
          <div id="scenario-list" class="scenario-list empty">Simulator unavailable</div>
        </div>
        <div class="panel wide">
          <div class="panel-header">
            <div>
              <h2>Device telemetry</h2>
              <p>Latest readings per hardware asset</p>
            </div>
            <button id="refresh-devices" class="nav-btn small">Refresh</button>
          </div>
          <div id="devices-grid" class="device-grid"></div>
        </div>
      </section>
      <section class="page" id="page-actions">
        <div class="panel" id="mode-panel">
          <div class="panel-header">
            <div>
              <h2>AI execution mode</h2>
              <p>Switch between auto and manual approvals</p>
            </div>
            <label class="switch">
              <input type="checkbox" id="auto-toggle" checked />
              <span class="slider"></span>
            </label>
          </div>
          <p id="mode-help">AI actions auto-execute when toggle is ON. Switch OFF to require manual approval.</p>
        </div>
        <div class="panel wide" id="actions-panel">
          <div class="panel-header">
            <div>
              <h2>Controller actions</h2>
              <p>Approve or inspect MPC decisions</p>
            </div>
          </div>
          <table class="table">
            <thead>
              <tr><th>ID</th><th>Time</th><th>Device</th><th>Reason</th><th>Explain</th><th>Status</th><th></th></tr>
            </thead>
            <tbody id="actions-body">
              <tr><td colspan="7">No actions yet</td></tr>
            </tbody>
          </table>
        </div>
        <div class="panel" id="alerts-panel">
          <div class="panel-header">
            <div>
              <h2>Anomalies</h2>
              <p>Latest VAE scores per rack</p>
            </div>
          </div>
          <ul id="anomalies-list" class="list"></ul>
        </div>
      </section>

      <section class="page" id="page-setup">
        <div class="panel wide" id="discovery-panel">
          <div class="panel-header">
            <div>
              <h2>Network discovery</h2>
              <p>Scan, validate, and onboard hardware</p>
            </div>
            <div class="discovery-controls">
              <input id="subnet" type="text" value="10.0.0.0/24" />
              <button id="start-discovery">Discover devices</button>
              <button id="import-sim">Import simulator</button>
              <span id="discovery-status" class="status-chip">Idle</span>
            </div>
          </div>
          <div class="discovery-log">
            <h3>Recent scans</h3>
            <ul id="discovery-history"></ul>
          </div>
          <table class="table">
            <thead>
              <tr><th>IP</th><th>Protocol</th><th>Template</th><th>Validate</th><th>Approve</th></tr>
            </thead>
            <tbody id="discovery-body"></tbody>
          </table>
        </div>
        <div class="panel" id="devices-panel">
          <div class="panel-header">
            <div>
              <h2>Device inventory</h2>
              <p>Approved controllable assets</p>
            </div>
          </div>
          <table class="table">
            <thead>
              <tr><th>ID</th><th>Type</th><th>Protocol</th><th>Host</th><th>Port</th><th></th></tr>
            </thead>
            <tbody id="devices-body">
              <tr><td colspan="6">Loading device listÃ¢â‚¬Â¦</td></tr>
            </tbody>
          </table>
        </div>
        <div class="panel" id="templates-panel">
          <div class="panel-header">
            <div>
              <h2>Templates</h2>
              <p>Auto-can fingerprint maps</p>
            </div>
          </div>
          <table class="table">
            <thead>
              <tr><th>Name</th><th>Protocol</th><th>Type</th><th>Map</th><th>File</th></tr>
            </thead>
            <tbody id="templates-body">
              <tr><td colspan="6">Loading templatesÃ¢â‚¬Â¦</td></tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <footer>
      <small>&copy; 2025 hcai-mini Ã‚Â· MQTT topics site/&lt;site&gt;/rack/&lt;rack&gt; Ã‚Â· ctrl/&lt;device&gt;</small>
    </footer>

    <script src="/ui/app.js"></script>
  </body>
</html>
